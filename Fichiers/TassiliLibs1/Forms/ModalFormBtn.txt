<template>
  <div>
    <div>
    <button @click="openModal()"
     :class="page.props.tassiliSettings.tassiliFormList[props.cle]['info']['class']" 
      class="bg-[blue] text-white p-2 rounded-[3px] h-[40px] flex items-center justify-center">
        <span class="material-icons text-[20px] leading-none">
            {{ page.props.tassiliSettings.tassiliFormList[props.cle]['info']['icon'] }}
        </span>
        <span>
           {{ page.props.tassiliSettings.tassiliFormList[props.cle]['info']['text'] }}
        </span>
      </button>
    </div>
 </div>
</template>

<script setup>
import { usePage } from '@inertiajs/vue3';
import { TassiliInput } from '@/Vendor/TassiliLibs/stores/tassiliInput';

const props = defineProps({
   collection : {
    type: String,
    required: true
  },
  cle : {
    type: String,
    required: true
  },
   record : {
    type: Object,
    required: true
  },
})

const tassiliInput = TassiliInput()

const page = usePage()

function openModal() {
tassiliInput.urlCustomValidation = props.cle
tassiliInput.form[props.cle] = JSON.parse(JSON.stringify(tassiliInput.tassiliFormList[props.cle]['fields']))
tassiliInput.customActionModal = true
tassiliInput.recordAction = props.record
tassiliInput.cancelError(tassiliInput.urlCustomValidation);

tassiliInput.formType = 'type3'

if(page.props.tassiliSettings.tassiliFormList[props.cle]['info']['wizardActive'] == 'yes') {
tassiliInput.formType = 'type4'
}

tassiliInput.putRecord()


}

</script>

<style lang="scss" scoped>

</style>
    